# TASK-016: 紧急联系人页面实现

## 任务概述

完成紧急联系人页面的 TODO(B) 标记，验证所有组件功能实现。

## 变更内容

### 修改文件
| 文件 | 变更类型 | 描述 |
|------|----------|------|
| `ContactsPage.tsx` | 修改 | 更新 TODO(B) 为 DONE(B)，移除未使用导入 |
| `ContactCard.tsx` | 修改 | 更新 TODO(B) 为 DONE(B) |
| `ContactForm.tsx` | 修改 | 更新 TODO(B) 为 DONE(B)，修复 lint 问题 |
| `DeleteContactDialog.tsx` | 修改 | 更新 TODO(B) 为 DONE(B)，添加类型注解 |
| `package.json` | 修改 | 添加 @radix-ui/react-dialog 依赖 |
| `IR-016-contacts-page.yaml` | 新增 | 实现报告 |

## 已实现组件

### ContactsPage
- 显示紧急联系人列表（按优先级排序）
- 添加联系人按钮（达到5个时禁用）
- 编辑/删除联系人操作
- 空状态显示
- 加载和错误状态
- 联系人计数器 (x/5)
- i18n 国际化支持
- 移动端响应式网格布局

### ContactCard
- 优先级徽章显示
- 联系人姓名、邮箱、电话显示
- 激活/禁用状态指示器
- 编辑和删除操作按钮

### ContactForm
- 姓名输入（必填）
- 邮箱输入（必填，有验证）
- 电话输入（可选）
- 新建模式（contact=null）
- 编辑模式（contact 有值）
- 表单验证和错误提示
- 成功后关闭对话框

### DeleteContactDialog
- 确认消息（显示联系人姓名）
- 取消和删除按钮
- 确认时调用删除 API
- 成功后关闭对话框
- 删除按钮使用危险样式

## Bug 修复

| 问题 | 文件 | 修复方式 |
|------|------|----------|
| 未使用的 CardHeader 导入 | ContactsPage.tsx | 从导入语句中移除 |
| isOpen 参数隐式 any 类型 | ContactForm.tsx, DeleteContactDialog.tsx | 添加显式 boolean 类型注解 |
| useEffect 中 setState lint 警告 | ContactForm.tsx | 使用 queueMicrotask 包装 |
| 缺少 @radix-ui/react-dialog | package.json | 通过 pnpm 安装 |

## 验证结果

| 检查项 | 状态 |
|--------|------|
| ESLint | 通过 |
| TypeScript 编译 | 通过 |
| TODO(B) 标记检查 | 通过 (无残留) |
| 构建 | 通过 |

## Git 提交

```
feat(user-web): complete emergency contacts page implementation

Task: TASK-016
Design State: v1.4.2
```

## 依赖的 API Hooks

- `hooks.useContacts()` - 获取联系人列表
- `hooks.useCreateContact()` - 创建联系人
- `hooks.useUpdateContact()` - 更新联系人
- `hooks.useDeleteContact()` - 删除联系人

## 依赖的翻译键

- `contacts.json` 中的所有键
- `common.json` 中的 cancel, save, delete, retry 等
