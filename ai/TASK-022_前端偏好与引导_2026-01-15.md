# TASK-022: 前端偏好与引导

## 概述

创建前端引导流程、设置页面偏好管理和视觉主题系统。

## 完成的工作

### API 客户端更新

| 文件 | 更改 |
|------|------|
| `packages/api-client/src/types.ts` | 添加 UserPreferences、UpdatePreferencesRequest、ToggleFeatureRequest 类型 |
| `packages/api-client/src/api.ts` | 添加 preferences API 方法 |
| `packages/api-client/src/hooks.ts` | 添加 usePreferences、useUpdatePreferences、useToggleFeature、useCompleteOnboarding hooks |

### 主题系统

| 文件 | 描述 |
|------|------|
| `apps/user-web/src/index.css` | 添加 high-contrast、warm-colors、reduced-motion CSS 类 |
| `apps/user-web/src/contexts/ThemeContext.tsx` | 创建 ThemeProvider 应用视觉偏好 |

### 引导组件

| 文件 | 描述 |
|------|------|
| `WelcomeStep.tsx` | 欢迎界面 |
| `PreferenceStep.tsx` | 新功能偏好选择 |
| `FeaturesStep.tsx` | 可选功能开关 |
| `VisualStep.tsx` | 视觉偏好设置 |
| `OnboardingPage.tsx` | 引导流程主页面 |

### 设置组件

| 文件 | 描述 |
|------|------|
| `FeatureToggle.tsx` | 可复用的功能开关组件 |
| `FeaturesSection.tsx` | 功能设置区域 |
| `VisualSection.tsx` | 视觉偏好设置区域 |

### 国际化

添加了以下语言的翻译文件：
- 英语 (en)
- 中文 (zh)
- 日语 (ja)

命名空间：
- `onboarding` - 引导流程文本
- `preferences` - 偏好设置文本

### App 集成

- `App.tsx` - 添加 ThemeProvider 包装器和 /onboarding 路由
- `SettingsPage.tsx` - 添加 FeaturesSection 和 VisualSection

## 主题 CSS 变量

### 高对比度 (high-contrast)
- 背景：黑色
- 前景：白色
- 主色：黄色

### 暖色调 (warm-colors)
- 背景：米色
- 前景：深棕色
- 主色：绿色

### 减少动画 (reduced-motion)
- 禁用所有动画和过渡效果

## 验证

| 检查项 | 状态 |
|--------|------:|
| API 客户端类型检查 | ✅ 通过 |
| 前端构建 | ✅ 通过 |

## Git 提交

```
feat(user-web): add preferences and onboarding frontend

- Add preferences API hooks
- Create ThemeContext for visual preferences
- Add CSS theme classes
- Create onboarding flow with 4 steps
- Add settings sections
- Add i18n translations (en, zh, ja)

TASK-022
```
